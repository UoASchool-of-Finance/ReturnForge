?usethis
install.packages('usethis')
usethis::use_news_md()
usethis::use_readme_md()
?lag
?dplyr::lag
usethis::use_data_raw()
SPY_QQQ <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices'
) %>%
dplyr::select(date, symbol, close, adjusted)
library(tidyverse)
SPY_QQQ <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices'
) %>%
dplyr::select(date, symbol, close, adjusted)
library(tidyverse)
install.packages('tidyverse')
library(tidyverse)
SPY_QQQ <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices'
) %>%
dplyr::select(date, symbol, close, adjusted)
install.packages('tidyquant')
tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices'
) %>%
dplyr::select(date, symbol, close, adjusted)
tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices'
) %>%
dplyr::select(date, symbol, close, adjusted)
stocks <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices') %>%
dplyr::select(date, series = symbol, value = adjusted)
devtools::document()
install.packages('devtools')
devtools::document()
stocks <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices') %>%
dplyr::select(date, series = symbol, value = adjusted)
stocks
stocks <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices') %>%
dplyr::select(date, series = symbol, value = adjusted)
stocks <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices') %>%
dplyr::select(date, series = symbol, value = adjusted)
stocks
devtools::document()
devtools::dev_sitrep()
devtools::document()
library(tidyverse)
stocks <- tidyquant::tq_get(
x = c('SPY', 'QQQ'),
from = '2015-01-01',
get = 'stock.prices') %>%
dplyr::select(date, series = symbol, value = adjusted)
usethis::use_data(stocks, overwrite = T)
devtools::document()
Sys.Date()
?usethis::use_mit_license()
usethis::use_mit_license()
usethis::use_r('genrets')
as.Date('2020-01-01') - 1
#| output: false
library(tidyverse)
library(tidyquant)
library(slider)
library(httr)
library(rvest)
library(janitor)
prices <- tidyquant::tq_get(
x = tickers,
get = 'stock.prices',
from = as.Date(start_date) - 1
) %>%
dplyr::group_by(symbol)
genrets <- function(tickers, start_date, ret_type = 'log', output = 'tibble', long = TRUE){
prices <- tidyquant::tq_get(
x = tickers,
get = 'stock.prices',
from = as.Date(start_date) - 1
) %>%
dplyr::select(date, symbol, adjusted) %>%
dplyr::group_by(symbol)
if(ret_type == 'log'){
rets <- prices %>%
dplyr::mutate(
return = log(adjusted / dplyr::lag(adjusted))
) %>%
tidyr::drop_na()%>%
dplyr::select(-adjusted)
}else if(ret_type == 'rel'){
rets <- prices %>%
dplyr::mutate(
return = (adjusted / dplyr::lag(adjusted)) - 1
) %>%
tidyr::drop_na() %>%
dplyr::select(-adjusted)
}else if(ret_type == 'abs'){
rets <- prices %>%
dplyr::mutate(
return = adjusted - dplyr::lag(adjusted)
) %>%
tidyr::drop_na() %>%
dplyr::select(-adjusted)
}else
if(output == 'tibble'){
if(long == TRUE){
return(rets)
}else if(long == FALSE){
tmp <-
rets %>%
tidyr::pivot_wider(id_cols = date, names_from = symbol, values_from = return)
return(tmp)
}
}else if(output == zoo){
tmp <- rets %>%
tidyr::pivot_wider(id_cols = date, names_from = symbol, values_from = return)
tmp <- zoo::zoo(tmp[,-1], order.by = tmp$date)
return(tmp)
}
usethis::use_package('dplyr')
usethis::use_package('tidyr')
usethis::use_package('tidyquant')
usethis::use_package('zoo')
usethis::use_package('stats')
usethis::use_pipe()
usethis::use_package('dplyr')
usethis::use_package('tidyr')
usethis::use_package('tidyquant')
usethis::use_package('zoo')
